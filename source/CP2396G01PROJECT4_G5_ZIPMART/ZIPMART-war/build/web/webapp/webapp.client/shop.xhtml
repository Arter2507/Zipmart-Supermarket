<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://java.sun.com/jsf/passthrough">   
    <h:body>
        <ui:composition template="/webapp/webapp.layout/_mainLayout.xhtml">
            <ui:define name="content">
                <!-- Single Page Header start -->
                <div class="container-fluid page-header py-5">
                    <h1 class="text-center text-white display-6">Shop</h1>
                    <ol class="breadcrumb justify-content-center mb-0">
                        <li class="breadcrumb-item"><h:link outcome="/webapp/webapp.client/index.xhtml">Home</h:link></li>
                        <li class="breadcrumb-item"><a href="javascript:void(0);">Pages</a></li>
                        <li class="breadcrumb-item active text-white">Shop</li>
                    </ol>
                </div>
                <!-- Single Page Header End -->

                <!-- Content Shop Start-->
                <div class="container-fluid fruite py-5">
                    <div class="container py-5">                
                        <div class="row g-4">
                            <div class="col-lg-12">
                                <div class="row g-4">
                                    <div class="col-xl-3">
                                        <div class="input-group w-100 mx-auto d-flex">
                                            <h:form id="search">
                                                <h:commandLink action="#{productBean.searchPro()}" id="search-icon-1" class="input-group-text p-3"><h:inputText class="form-control p-3" a:placeholder="search..."  value="#{productBean.productName}"/><i class="fa fa-search"></i></h:commandLink>
                                            </h:form>
                                        </div>
                                    </div>
                                    <div class="col-6"></div>
                                    <div class="col-xl-3">
                                        <div class="bg-light ps-3 py-3 rounded d-flex justify-content-between mb-4">
                                            <label for="fruits">Default Sorting:</label>
                                            <select id="fruits" name="fruitlist" class="border-0 form-select-sm bg-light me-3" form="fruitform">
                                                <option value="volvo">Nothing</option>
                                                <option value="saab">Popularity</option>
                                                <option value="opel">Organic</option>
                                                <option value="audi">Fantastic</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row g-4">
                                    <div class="col-lg-3">
                                        <div class="row g-4">
                                            <div class="col-lg-12">
                                                <div class="mb-3">
                                                    <h4>Categories</h4> <!-- Category -->
                                                    <ul class="list-unstyled fruite-categorie">
                                                        <ui:repeat value="#{categoryBean.showAllCate()}" var="itemCate">
                                                            <div class="d-flex justify-content-between fruite-name">
                                                                <h:selectBooleanCheckbox id="cate" styleClass="custom-control-input">
                                                                    <f:ajax render="productList" listener="#{productBean.updateSelected}" />
                                                                    <!-- Truyền giá trị của itemCate.categoryName cho phương thức updateSelected -->
                                                                    <f:param name="selectedCategory" value="#{itemCate.id}" />
                                                                </h:selectBooleanCheckbox>
                                                                <h:link class="custom-control-label"><h:outputText value="#{itemCate.categoryName}"/><i class="fa-solid fa-bag-shopping"></i></h:link>
                                                            </div>                                         
                                                        </ui:repeat>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="mb-3">
                                                    <h4 class="mb-2">Price</h4>
                                                    <input type="range" class="form-range w-100" id="rangeInput" name="rangeInput" min="0" max="500" value="0" oninput="amount.value=rangeInput.value"/>
                                                    <output id="amount" name="amount" min-velue="0" max-value="500" for="rangeInput">0</output>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <h4 class="mb-3">Featured products</h4>
                                                <c:forEach var="fea" items="#{productBean.showFeature()}">
                                                    <div class="d-flex align-items-center justify-content-start">
                                                        <div class="rounded me-4" style="width: 100px; height: 100px;">
                                                            <h:graphicImage value="#{resource[fea.imageURL]}" class="img-fluid rounded" alt=""/>
                                                        </div>
                                                        <div>
                                                            <h6 class="mb-2">#{fea.productName}</h6>
                                                            <div class="d-flex mb-2">
                                                                <i class="fa fa-star text-secondary"></i>
                                                                <i class="fa fa-star text-secondary"></i>
                                                                <i class="fa fa-star text-secondary"></i>
                                                                <i class="fa fa-star text-secondary"></i>
                                                                <i class="fa fa-star"></i>
                                                            </div>
                                                            <div class="d-flex mb-2">
                                                                <h5 class="fw-bold me-2">
                                                                    <h:outputText value="#{fea.price_discout > 0 ? fea.price_discout : fea.unitPrice}">
                                                                        <f:convertNumber type="currency" currencySymbol="$" locale="en_US"/>
                                                                    </h:outputText>
                                                                </h5>
                                                                <h:outputText value="#{fea.price_discout > 0 ? fea.unitPrice : ''}" class="text-danger text-decoration-line-through"> 
                                                                    <f:convertNumber type="currency" currencySymbol="$" locale="en_US"/>
                                                                </h:outputText>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </c:forEach>
                                                <div class="d-flex justify-content-center my-4">
                                                    <a href="#" class="btn border border-secondary px-4 py-3 rounded-pill text-primary w-100">View More</a>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="position-relative">
                                                    <img src="#{request.contextPath}/resources/images/banner/banner.jpg" class="img-fluid w-100 rounded" alt=""/>
                                                    <div class="position-absolute" style="top: 50%; right: 10px; transform: translateY(-50%);">
                                                        <h3 class="text-secondary fw-bold">Zip <br></br> Mart <br></br> Banner</h3>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-9">
                                        <h:form id="shoppro">
                                            <div class="row g-4 justify-content-center">
                                                <ui:repeat var="pro" value="#{productBean.showAllProa()}">
                                                    <div class="col-md-6 col-lg-6 col-xl-4 cart-content">
                                                        <div class="rounded position-relative fruite-item">
                                                            <div class="fruite-img">
                                                                <h:graphicImage value="#{resource[pro.imageURL]}" height="336" width="336" class="img-fluid w-100 rounded-top" alt=""/>
                                                            </div>
                                                            <h:outputText value="#{pro.discount > 0 ? 'SAFE OFF ' .concat(pro.discount.toString()).concat('%') : ''}" class="text-white bg-danger px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;" rendered="#{pro.discount > 0}"/>
                                                            <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                                                <h4>#{pro.productName}</h4>
                                                                <h:outputText value="#{pro.inventoryStatus.statusName}" styleClass="#{pro.inventoryStatus.id == 1 ? 'text-white bg-info px-3 py-1 rounded position-absolute' : 'text-white bg-warning px-3 py-1 rounded position-absolute'}" style="top: 10px; right: 10px;"/>
                                                                <h:outputText value="#{pro.price_discout > 0 ? pro.unitPrice : ''}" class="text-danger text-decoration-line-through">
                                                                    <f:convertNumber type="currency" currencySymbol="$" locale="en_US"/>
                                                                </h:outputText>
                                                                <div class="d-flex justify-content-between flex-lg-wrap">
                                                                    <h:outputText value="$#{pro.price_discout > 0 ? pro.price_discout : pro.unitPrice}/#{pro.unit}" class="text-dark fs-5 fw-bold mb-0">
                                                                        <f:convertNumber type="currency" currencySymbol="$" locale="en_US"/>
                                                                    </h:outputText>
                                                                    <h:commandLink action="#{productBean.showDetailsPro(pro.id)}" class="btn border border-secondary rounded-pill px-2 text-primary"><i class="fa fa-shopping-bag me-1 text-primary"></i> View Details</h:commandLink>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui:repeat>
                                                <div class="col-12">
                                                    <div class="pagination d-flex justify-content-center">
                                                        <a href="#" class="rounded previous-page">&laquo;</a>
                                                        <a href="#" class="active rounded">1</a>
                                                        <a href="#" class="rounded">2</a>
                                                        <a href="#" class="rounded">3</a>
                                                        <a href="#" class="rounded">4</a>
                                                        <a href="#" class="rounded">5</a>
                                                        <a href="#" class="rounded">6</a>
                                                        <a href="#" class="rounded next-page">&raquo;</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </h:form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Content Shop End-->
                <h:outputScript name="/js/pagnation.js" />
            </ui:define>
        </ui:composition>
    </h:body>
</html>
